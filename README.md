# מערכת הצבעה לדיירים

מערכת פשוטה להצבעה אנונימית עבור דיירי הבניין.

## דרישות מערכת

- Go 1.21 ומעלה
- SQLite3

## התקנה והפעלה

1. התקן את Go מהאתר הרשמי: https://golang.org/dl/

2. התקן את SQLite3:
   - macOS (עם Homebrew): `brew install sqlite3`
   - Linux: `sudo apt-get install sqlite3`
   - Windows: הורד מהאתר הרשמי: https://www.sqlite.org/download.html

3. הורד את הקוד:
   ```bash
   git clone [URL-של-הריפוזיטורי]
   cd poll
   ```

4. התקן את התלויות:
   ```bash
   go mod tidy
   ```

5. הגדר את מועד סיום ההצבעה (אופציונלי):
   ```bash
   # ברירת המחדל היא 1 באפריל 2024 בשעה 23:59:59
   export POLL_END_TIME="2024-04-01 23:59:59"
   ```

6. הפעל את השרת:
   ```bash
   go run main.go
   ```

7. גש לכתובת הבאה בדפדפן:
   ```
   http://localhost:8080
   ```

## משתני סביבה

- `POLL_END_TIME`: מועד סיום ההצבעה בפורמט "YYYY-MM-DD HH:mm:ss"
  - דוגמה: `2024-04-01 23:59:59`
  - ברירת מחדל: `2024-04-01 23:59:59`
- `PORT`: פורט להפעלת השרת
  - ברירת מחדל: `8080`

## מנגנון האנונימיות

המערכת מבטיחה אנונימיות מוחלטת של ההצבעות באמצעות מספר מנגנונים:

### הפרדת מידע
- המערכת משתמשת בשתי טבלאות נפרדות:
  1. טבלת דירות (`apartments`): מכילה רק את מספר הדירה ושם המצביע
  2. טבלת הצבעות (`votes`): מכילה רק את ההצבעות עצמן, ללא קשר לדירות

### מניעת מתאמים
- אין חותמות זמן בטבלת ההצבעות
- סדר ההצבעות משתנה באופן אקראי בכל פעם שמתווספת הצבעה חדשה
- לא ניתן לקשר בין הצבעה לדירה ספציפית גם אם יש גישה למסד הנתונים

### תהליך ההצבעה
1. כשדייר מצביע, המערכת:
   - שולפת את כל ההצבעות הקיימות
   - מוסיפה את ההצבעה החדשה
   - מערבבת את כל ההצבעות בסדר אקראי
   - מוחקת את כל ההצבעות מהטבלה
   - מכניסה אותן מחדש בסדר האקראי החדש

### הסתרת תוצאות
- התוצאות מוסתרות לחלוטין עד לסיום ההצבעה
- לא ניתן לראות תוצאות ביניים
- התוצאות מתפרסמות רק לאחר המועד שנקבע מראש

### אבטחת פרטיות
- גם למנהל המערכת אין דרך לדעת מי הצביע מה
- לא ניתן לשחזר את ההצבעה של דירה מסוימת גם בגישה ישירה למסד הנתונים
- המערכת לא שומרת לוגים או מידע נוסף שיכול לחשוף את זהות המצביעים

### מגבלות המערכת
- ניתן לראות אילו דירות הצביעו (אך לא מה הצביעו)
- כל דירה יכולה להצביע פעם אחת בלבד
- שם המצביע נשמר רק לצורך וידוא שלא תהיה הצבעה כפולה

## תמיכה

לשאלות ותמיכה טכנית, צור קשר עם מנהל המערכת. 